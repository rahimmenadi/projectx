<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Document</title>
    <link rel="stylesheet" href="../CSS/all.min.css">
    <link
            href="https://unpkg.com/ionicons@4.5.10-0/dist/css/ionicons.min.css"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link rel="stylesheet" href="../css/orders.css">
</head>
<body>
    <div class="page">
        <div class="sidebar-all">
            <div class="sidebar">
                <div class="upper-sidebar">
                <h3 class="">BUY-IT</h3>
                <ul>
                    <li>
                      <a class="" href="./dash-1.html">
                        <img class="dash-i" src="../../images/dashboard-icon.svg" alt="">
                        <span>Dashboard</span>
                      </a>
                    </li>
                    <li>
                      <a class="" href="settings.html">
                        <img class="sales-i" src="../../images/shopping-cart-icon.svg" alt="">
                        <span>Sales</span>
                      </a>
                    </li>
                    <li>
                      <a class="" href="./dash_product.html">
                        <img class="products-i" src="../../images/product_icon.svg" alt="">
                        <span>Products</span>
                      </a>
                    </li>
                   
                    <li>
                      <a class="active" href="./orders.html">
                        <img class="delivery-i" src="../../images/delivery_icon.svg" alt="">
                        <span>Delivery</span>
                      </a>
                    </li>
                    <li>
                      <a class="" href="friends.html">
                        <img class="store-i" src="../../images/shop-icon.svg" alt="">
                        <span>Your store</span>
                      </a>
                    </li>
                    <div class="line"></div>
                    <li>
                      <a class="" href="files.html">
                        <img class="plan-i" src="../../images/contract-icon.svg" alt="">
                        <span>Your plan</span>
                      </a>
                    </li>
                    <li>
                      <a class="" href="plans.html">
                        <img class="ads-i" src="../../images/megaphone-icon.svg" alt="">
                        <span>Your ads</span>
                      </a>
                    </li>
                    <li>
                      <a class="" href="plans.html">
                        <img class="settings-i" src="../../images/setting-icon.svg" alt="">
                        <span>Settings</span>
                      </a>
                    </li>
                  </ul>
                </div>
                  <div class="under-sidebar">
                    <h5>Become Sigma!</h5>
                    <p>And get all the features of your e-commerce</p>
                    <button id="Upgrade-btn" class="upgrade">Upgrade</button>
                  </div>
              </div>
        </div>
        <div class="main-section">
          <header>
            <div class="container head-flex">
                
                
                <div class="profile">
                  <div class="profile-image">
                    <img src="/images/product-orange.svg" alt="">
                  </div>
                  <div class="profile-name">hello</div>
                  
                </div>
              
           
        </div>
        <!-- <div class="section-head">dd</div> -->
        </header>
            <div class="product-vertical">
              <div class="container">
                <div class="text-topper">Your Orders
                  
                </div>

                <div class="main">

                  <ul class="orderul">
                      <li class="orderli">
                          <i class="icon uil uil-box"></i>
                          <div class="progress one">
                              <p>1</p>
                              <i class="uil uil-check"></i>
                          </div>
                          <p class="text">Packging</p>
                      </li>
                      <li class="orderli">
                          <i class="icon uil uil-truck-loading"></i>
                          <div class="progress two">
                              <p>2</p>
                              <i class="uil uil-check"></i>
                          </div>
                          <p class="text">Truck loading</p>
                      </li>
                     
                      <li class="orderli">
                          <i class="icon uil uil-truck"></i>
                          <div class="progress three">
                              <p>3</p>
                              <i class="uil uil-check"></i>
                          </div>
                          <p class="text">Order in Progress</p>
                      </li>
                      <li class="orderli">
                          <i class="icon uil uil-map-marker"></i>
                          <div class="progress four">
                              <p>4</p>
                              <i class="uil uil-check"></i>
                          </div>
                          <p class="text">Order Arrived</p>
                      </li>
                      
                  </ul>
                  <div class="wrapper">
                    <button class="submitbtn" id="valider">
                      <span>Save</span>
                      <div class="success">
                      <svg xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"  viewBox="0 0 29.756 29.756" style="enable-background:new 0 0 29.756 29.756;" xml:space="preserve">
                        
                    <path d="M29.049,5.009L28.19,4.151c-0.943-0.945-2.488-0.945-3.434,0L10.172,18.737l-5.175-5.173   c-0.943-0.944-2.489-0.944-3.432,0.001l-0.858,0.857c-0.943,0.944-0.943,2.489,0,3.433l7.744,7.752   c0.944,0.943,2.489,0.943,3.433,0L29.049,8.442C29.991,7.498,29.991,5.953,29.049,5.009z"/>
                   </svg>
                        </div>
                    </button>
                  </div>
          
              </div>
             
          
              <script src="main.js"></script>
              </div>
            </div>
                <div class="container" id="select-choice">
                    <div id="choice-1">
                        
                        <table class="product-table">
                            <thead id="table-head-content">
                                
                            </thead>
                            <tbody id="table-content-js">
                                

                                
                            </tbody>
                        </table>
                </div>
                <div id="choice-2">
                    <div class="section2">
                        
                        <div class="container" id="product-container-dash">
                            
                            
                            
                                                </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<!-- iconify -->
<script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script><script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>

    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    
    <script>
      

const token = localStorage.getItem("sellertoken")
console.log(token)
let isDelivered=[false,false,false,false]

var orderid=localStorage.getItem('orderIdSeller')
console.log(orderid)



  


const one = document.querySelector(".one");
const two = document.querySelector(".two");
const three = document.querySelector(".three");
const four = document.querySelector(".four");
const five = document.querySelector(".five");
axios.get('https://buy-it-sigma.herokuapp.com/api/v1/orders/'+orderid, {
  headers: {
    Authorization: 'Bearer ' + token
  }

})
  .then(response => {
    
    
console.log(response.data.isDelivered)

if(response.data.isDelivered[0]==true){

  one.classList.add("active");
    two.classList.remove("active");
    three.classList.remove("active");
    four.classList.remove("active");
    console.log('rani f 11')
  
}
if(response.data.isDelivered[1]==true){
  one.classList.add("active");
  two.classList.add("active");
  three.classList.remove("active");
  four.classList.remove("active");  
}
if(response.data.isDelivered[2]==true){
  one.classList.add("active");
    two.classList.add("active");
    three.classList.add("active");
    four.classList.remove("active");
}
if(response.data.isDelivered[3]==true){
  

  
  one.classList.add("active");
  two.classList.add("active");
  three.classList.add("active");
  four.classList.add("active");
  console.log('rani f 3')
}







    
  })
  .catch(error => {
    console.log(token)

    console.log(error)
  });



one.onclick = function() {
    one.classList.add("active");
    two.classList.remove("active");
    three.classList.remove("active");
    four.classList.remove("active");
    isDelivered[0]=true
    isDelivered[1]=false
    isDelivered[2]=false
    isDelivered[3]=false
    
    
}

two.onclick = function() {
    one.classList.add("active");
    two.classList.add("active");
    three.classList.remove("active");
    four.classList.remove("active");
    isDelivered[0]=true
    isDelivered[1]=true
    isDelivered[2]=false
    isDelivered[3]=false
    
   
}
three.onclick = function() {
    one.classList.add("active");
    two.classList.add("active");
    three.classList.add("active");
    four.classList.remove("active");
    isDelivered[0]=true
    isDelivered[1]=true
    isDelivered[2]=true
    isDelivered[3]=false
    
}
four.onclick = function() {
    one.classList.add("active");
    two.classList.add("active");
    three.classList.add("active");
    four.classList.add("active");
    isDelivered[0]=true
    isDelivered[1]=true
    isDelivered[2]=true
    isDelivered[3]=true
  
}
console.log(isDelivered)

const validerbtn=document.getElementById('valider');
validerbtn.addEventListener('click',function(e){
    e.preventDefault();
    console.log("wash")
   

axios.patch('https://buy-it-sigma.herokuapp.com/api/v1/orders/'+orderid+'/delivery',{isDelivered}, {
  headers: {
    Authorization: 'Bearer ' + token
  }

})
  .then(response => {
    console.log(isDelivered)
    
console.log(response.data.data)
    
  })
  .catch(error => {
    console.log(token)

    console.log(error)
  });


  
})
    </script>

</body>
</html>